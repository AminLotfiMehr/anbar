# ุฑุงูููุง ุณุฑุน ูุตุจ ุณุฑูุฑ

## ๐ ุฎูุงุตู ุงุทูุงุนุงุช

- **ุข ูพ ุงุณุชุงุชฺฉ**: 185.120.251.246
- **ุข ูพ ุฏุงุฎู**: 192.168.1.151
- **ูพูุฑุช SSH**: 2223
- **ูพูุฑุช API**: 3000
- **ูุงู ูพุฑูฺู**: inventory-app

---

## ๐ ุฑูุด ุงูู: ูุตุจ ุฎูุฏฺฉุงุฑ (ูพุดููุงุฏ)

### ฺฏุงู 1: ุงุชุตุงู ุจู ุณุฑูุฑ
```bash
ssh root@192.168.1.151 -p 2223
```

### ฺฏุงู 2: ุฏุงูููุฏ ู ุงุฌุฑุง ุงุณฺฉุฑูพุช ูุตุจ
```bash
cd ~
# ุขูพููุฏ ูุงู setup-server.sh ุจู ุณุฑูุฑ
# ุณูพุณ ุงุฌุฑุง ฺฉูุฏ:
chmod +x setup-server.sh
sudo bash setup-server.sh
```

ุงู ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ููู ฺุฒ ุฑุง ูุตุจ ูโฺฉูุฏ:
- โ Node.js 20 LTS
- โ Bun Runtime
- โ PM2 Process Manager
- โ Firewall (UFW)
- โ Fail2Ban (ุงููุช)
- โ ุงุฌุงุฏ ูพูุดูโูุง ู ุชูุธูุงุช

---

## ๐ฆ ฺฏุงู 3: ุงูุชูุงู ูุงูโูุง ูพุฑูฺู

### ุงุฒ ุทุฑู VSCode (ุขุณุงูโุชุฑู ุฑูุด):

1. ูุตุจ Extension ุฏุฑ VSCode:
   - `Remote - SSH`

2. ุงุชุตุงู ุจู ุณุฑูุฑ:
   - F1 โ `Remote-SSH: Connect to Host`
   - ูุงุฑุฏ ฺฉูุฏ: `root@192.168.1.151:2223`

3. ุจุงุฒ ฺฉุฑุฏู ูพูุดู:
   - File โ Open Folder
   - ุงูุชุฎุงุจ: `/root/inventory-app`

4. ฺฉูพ ูุงูโูุง:
   - ุงู ูุงูโูุง ู ูพูุดูโูุง ุฑุง ฺฉูพ ฺฉูุฏ:
     ```
     backend/ (ฺฉู ูพูุดู)
     package.json
     tsconfig.json
     server.ts
     bun.lock
     ```

### ุงุฒ ุทุฑู SCP (ุฏุณุช):

```bash
# ุงุฒ ฺฉุงููพูุชุฑ ุฎูุฏ
cd /path/to/your/project

scp -P 2223 -r backend/ root@192.168.1.151:~/inventory-app/
scp -P 2223 package.json root@192.168.1.151:~/inventory-app/
scp -P 2223 tsconfig.json root@192.168.1.151:~/inventory-app/
scp -P 2223 server.ts root@192.168.1.151:~/inventory-app/
scp -P 2223 bun.lock root@192.168.1.151:~/inventory-app/
```

---

## โ๏ธ ฺฏุงู 4: ูุตุจ ู ุงุฌุฑุง ูพุฑูฺู

```bash
# ุงุชุตุงู ุจู ุณุฑูุฑ
ssh root@192.168.1.151 -p 2223

# ูุฑูุฏ ุจู ูพูุดู ูพุฑูฺู
cd ~/inventory-app

# ูุตุจ Dependencies
bun install

# ุชุณุช ุณุฑูุฑ (ุงุฎุชุงุฑ)
bun run server.ts
# ุงฺฏุฑ ฺฉุงุฑ ฺฉุฑุฏุ Ctrl+C ุจุฑุง ุชููู

# ุงุฌุฑุง ุฏุงุฆู ุจุง PM2
pm2 start ecosystem.config.js
pm2 save
pm2 startup
# ุฏุณุชูุฑ ุฎุฑูุฌ ุฑุง ฺฉูพ ู ุงุฌุฑุง ฺฉูุฏ
```

---

## ๐ ฺฏุงู 5: ุชูุธู Port Forwarding

ุฏุฑ ุชูุธูุงุช ููุฏู ุฎูุฏ:

| ุชูุธู | ููุฏุงุฑ |
|------|------|
| ูพูุฑุช ุฎุงุฑุฌ | 3000 |
| ูพูุฑุช ุฏุงุฎู | 3000 |
| IP ุฏุงุฎู | 192.168.1.151 |
| ูพุฑูุชฺฉู | TCP ุง Both |

---

## โ ฺฏุงู 6: ุชุณุช ุงุชุตุงู

### ุชุณุช ุงุฒ ุฏุงุฎู ุดุจฺฉู:
```bash
curl http://192.168.1.151:3000/health
```

### ุชุณุช ุงุฒ ุฎุงุฑุฌ ุดุจฺฉู (ููุจุงู 4G):
```bash
curl http://185.120.251.246:3000/health
```

ุงฺฏุฑ ุงู ูพุงุณุฎ ุฑุง ุฏุฑุงูุช ฺฉุฑุฏุฏุ ูููู ุจูุฏูโุงุฏ:
```json
{"status":"ok","message":"Server is healthy"}
```

---

## ๐ฑ ฺฏุงู 7: ุชูุธู ุงูพูฺฉุดู

1. ุงูพูฺฉุดู ุฑุง ุจุงุฒ ฺฉูุฏ
2. ุฑู ุขฺฉูู ุชูุธูุงุช (โ๏ธ) ฺฉูฺฉ ฺฉูุฏ
3. ูุงุฑุฏ ฺฉูุฏ:
   - **ุขุฏุฑุณ ุณุฑูุฑ**: `185.120.251.246`
   - **ูพูุฑุช**: `3000`
4. ุฑู "ุชุณุช ุงุชุตุงู" ฺฉูฺฉ ฺฉูุฏ
5. ุงฺฏุฑ ูููู ุจูุฏุ "ุฐุฎุฑู ุชูุธูุงุช" ุฑุง ุจุฒูุฏ

---

## ๐ง ุฏุณุชูุฑุงุช ููุฏ

### ูุฏุฑุช PM2:
```bash
pm2 status                    # ูุถุนุช ุณุฑูุฑ
pm2 logs inventory-backend    # ููุงุด ูุงฺฏโูุง
pm2 restart inventory-backend # ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
pm2 stop inventory-backend    # ุชููู
pm2 monit                     # ูุงูุชูุฑูฺฏ
```

### ุจุฑุฑุณ Firewall:
```bash
sudo ufw status
```

### ูุดุงูุฏู ูพูุฑุชโูุง:
```bash
sudo lsof -i :3000
```

---

## ๐ ุฑูุน ูุดฺฉูุงุช ุฑุงุฌ

### 1. ุณุฑูุฑ ุฏุฑ ุฏุณุชุฑุณ ูุณุช
```bash
# ุจุฑุฑุณ ุณุฑูุฑ
pm2 status
pm2 logs inventory-backend

# ุจุฑุฑุณ Firewall
sudo ufw status
sudo ufw allow 3000/tcp
```

### 2. Port Forward ฺฉุงุฑ ููโฺฉูุฏ
- ุฏูุจุงุฑู ุชูุธูุงุช ููุฏู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- IP ุฏุงุฎู ุตุญุญ ุงุณุชุ (192.168.1.151)
- ูพูุฑุชโูุง ุตุญุญ ูุณุชูุฏุ (3000)
- ููุฏู ุฑุง restart ฺฉูุฏ

### 3. ุฎุทุง "EADDRINUSE"
```bash
# ูพุฏุง ู kill ฺฉุฑุฏู ูพุฑูุณุณ
sudo lsof -i :3000
sudo kill -9 PID_NUMBER
```

---

## ๐ ฺฺฉโูุณุช ููุง

- [ ] ุณุฑูุฑ ูุชุตู ุจู ุงูุชุฑูุช ุงุณุช
- [ ] Node.js/Bun ูุตุจ ุดุฏู
- [ ] PM2 ูุตุจ ุดุฏู
- [ ] ูุงูโูุง ููุชูู ุดุฏูุฏ
- [ ] `bun install` ุงุฌุฑุง ุดุฏ
- [ ] Firewall ุชูุธู ุดุฏู (ูพูุฑุช 3000)
- [ ] Port Forwarding ุชูุธู ุดุฏู
- [ ] PM2 ุฑุงูโุงูุฏุงุฒ ุดุฏู
- [ ] ุชุณุช ุฏุงุฎู ูููู (192.168.1.151:3000)
- [ ] ุชุณุช ุฎุงุฑุฌ ูููู (185.120.251.246:3000)
- [ ] ุงูพูฺฉุดู ูุชุตู ุดุฏ

---

## ๐ฏ ูฺฉุงุช ููู

1. **ูพูุฑุช 80**: ุงฺฏุฑ ูโุฎูุงูุฏ ูพูุฑุช 80 ุงุณุชูุงุฏู ฺฉูุฏุ ุฏุฑ `ecosystem.config.js` ูพูุฑุช ุฑุง ุจู 80 ุชุบุฑ ุฏูุฏ ู ุณุฑูุฑ ุฑุง restart ฺฉูุฏ.

2. **ุขุฏุฑุณ ุฏุงุฎู**: ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุดุจฺฉู ุฏุงุฎู:
   - ุขุฏุฑุณ: `192.168.1.151`
   - ูพูุฑุช: `3000`

3. **ุขุฏุฑุณ ุฎุงุฑุฌ**: ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุฎุงุฑุฌ ุดุจฺฉู:
   - ุขุฏุฑุณ: `185.120.251.246`
   - ูพูุฑุช: `3000`

4. **ุจฺฉุงูพ**: ุญุชูุงู ุงุฒ ุฏุชุงุจุณ ุฎูุฏ backup ุจฺฏุฑุฏ:
   ```bash
   cd ~/inventory-app
   tar -czf backup-$(date +%Y%m%d).tar.gz backend/db/
   ```

---

## ๐ ุฏุฑ ุตูุฑุช ูุงุฒ ุจู ฺฉูฺฉ

ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏ:

1. ูุงฺฏโูุง PM2 ุฑุง ฺฺฉ ฺฉูุฏ:
   ```bash
   pm2 logs inventory-backend --lines 50
   ```

2. ูุงู `DEPLOYMENT.md` ุฑุง ุจุฑุง ุฌุฒุฆุงุช ุจุดุชุฑ ูุทุงูุนู ฺฉูุฏ

3. ูุทูุฆู ุดูุฏ ุชูุงู ูุฑุงุญู ุจู ุชุฑุชุจ ุงูุฌุงู ุดุฏูโุงูุฏ

---

**ูููู ุจุงุดุฏ! ๐**
