# ุฑุงูููุง ฺฉุงูู ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ุณุฑูุฑ

## ๐ ุงุทูุงุนุงุช ุณุฑูุฑ ุดูุง

- **ุขุฏุฑุณ IP ุนููู**: 185.120.251.246
- **ุขุฏุฑุณ IP ุฏุงุฎู**: 192.168.1.151
- **ูพูุฑุช**: 2223 (Port Forwarding ุชูุธู ุดุฏู)
- **ุณุณุชู ุนุงูู**: Ubuntu Server

---

## ๐ฆ ูุงูโูุง ููุฑุฏ ูุงุฒ ุจุฑุง ุงูุชูุงู ุจู ุณุฑูุฑ

### ูุงูโูุง ู ูพูุดูโูุง ฺฉู ุจุงุฏ ุจู ุณุฑูุฑ ููุชูู ุดููุฏ:

```
inventory-app/              (ูุงู ูพุฑูฺู ูพุดููุงุฏ)
โโโ backend/                (ฺฉู ูพูุดู backend)
โ   โโโ db/
โ   โโโ trpc/
โ   โโโ types/
โ   โโโ utils/
โ   โโโ hono.ts
โโโ package.json            (ูุงู dependencies)
โโโ tsconfig.json           (ุชูุธูุงุช TypeScript)
โโโ bun.lock                (ุงุฎุชุงุฑ)
โโโ server.ts               (ูุงู ุงุฌุฑุง ุณุฑูุฑ)
```

### ูุงูโูุง ฺฉู ูุงุฒ ุจู ุงูุชูุงู ูุฏุงุฑูุฏ:
- ูพูุดู `app/` (ููุท ุจุฑุง ููุจุงู)
- ูพูุดู `assets/`
- ูพูุดู `contexts/`
- ูพูุดู `constants/`
- ูุงูโูุง `.gitignore`, `README.md`, `eslint.config.js`

---

## ๐ ูุฑุงุญู ูุตุจ ฺฉุงูู (ฺฏุงู ุจู ฺฏุงู)

### ูุฑุญูู 1: ุงุชุตุงู ุจู ุณุฑูุฑ ุงุฒ ุทุฑู VSCode

#### ูุตุจ Remote-SSH Extension ุฏุฑ VSCode:
1. VSCode ุฑุง ุจุงุฒ ฺฉูุฏ
2. ุจู Extensions ุจุฑูุฏ (Ctrl+Shift+X)
3. "Remote - SSH" ุฑุง ุฌุณุชุฌู ู ูุตุจ ฺฉูุฏ
4. F1 ุฑุง ูุดุงุฑ ุฏูุฏ ู `Remote-SSH: Connect to Host` ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
5. ุงู ุฏุณุชูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   ```
   ssh root@192.168.1.151 -p 2223
   ```
6. ุฑูุฒ ุนุจูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ

#### ุฑูุด ุฌุงฺฏุฒู: ุงุชุตุงู ูุณุชูู ุงุฒ Terminal
```bash
ssh root@192.168.1.151 -p 2223
```

---

### ูุฑุญูู 2: ูุตุจ ูุฑูโุงูุฒุงุฑูุง ููุฑุฏ ูุงุฒ ุฑู ุณุฑูุฑ

#### 1. ูุตุจ Node.js (ูุณุฎู 20 LTS)
```bash
# ุจูโุฑูุฒุฑุณุงู ุณุณุชู
sudo apt update && sudo apt upgrade -y

# ูุตุจ Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs

# ุจุฑุฑุณ ูุตุจ
node -v   # ุจุงุฏ ูุณุฎู v20.x.x ุฑุง ูุดุงู ุฏูุฏ
npm -v
```

#### 2. ูุตุจ Bun (Runtime ุณุฑุนโุชุฑ - ูพุดููุงุฏ)
```bash
# ูุตุจ Bun
curl -fsSL https://bun.sh/install | bash

# ุงุถุงูู ฺฉุฑุฏู ุจู PATH
echo 'export BUN_INSTALL="$HOME/.bun"' >> ~/.bashrc
echo 'export PATH="$BUN_INSTALL/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc

# ุจุฑุฑุณ ูุตุจ
bun -v
```

#### 3. ูุตุจ PM2 (ุจุฑุง ุงุฌุฑุง ุฏุงุฆู ุณุฑูุฑ)
```bash
npm install -g pm2
pm2 -v
```

---

### ูุฑุญูู 3: ุงุฌุงุฏ ูพูุดู ูพุฑูฺู ู ุงูุชูุงู ูุงูโูุง

#### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ VSCode Remote (ูพุดููุงุฏ)

1. ุจุนุฏ ุงุฒ ุงุชุตุงู ุจู ุณุฑูุฑ ุงุฒ ุทุฑู Remote-SSH:
   ```bash
   mkdir -p ~/inventory-app
   cd ~/inventory-app
   ```

2. ุฏุฑ VSCodeุ File โ Open Folder ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
3. ูพูุดู `/root/inventory-app` ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ
4. ูุงูโูุง ุฑุง ุงุฒ ฺฉุงููพูุชุฑ ุฎูุฏ ุจู ุงู ูพูุดู ฺฉูพ ฺฉูุฏ (Drag & Drop)

#### ุฑูุด 2: ุงุณุชูุงุฏู ุงุฒ SCP ุงุฒ ฺฉุงููพูุชุฑ ุฎูุฏ

```bash
# ุงุฒ ฺฉุงููพูุชุฑ ุฎูุฏ (Windows Terminal ุง Git Bash)
cd /path/to/your/local/project

# ุงูุชูุงู ูุงูโูุง
scp -P 2223 -r backend/ root@192.168.1.151:~/inventory-app/
scp -P 2223 package.json root@192.168.1.151:~/inventory-app/
scp -P 2223 tsconfig.json root@192.168.1.151:~/inventory-app/
scp -P 2223 server.ts root@192.168.1.151:~/inventory-app/
scp -P 2223 bun.lock root@192.168.1.151:~/inventory-app/
```

#### ุฑูุด 3: ุงุณุชูุงุฏู ุงุฒ Git (ุงฺฏุฑ ูพุฑูฺู ุฑุง ุฑู Git ุฏุงุฑุฏ)

```bash
# ุฑู ุณุฑูุฑ
cd ~/inventory-app
git clone YOUR_REPO_URL .
```

---

### ูุฑุญูู 4: ูุตุจ Dependencies

```bash
# ูุงุฑุฏ ูพูุดู ูพุฑูฺู ุดูุฏ
cd ~/inventory-app

# ูุตุจ ุจุง Bun (ุณุฑุนโุชุฑ)
bun install

# ุง ุจุง npm (ุงฺฏุฑ Bun ูุตุจ ูฺฉุฑุฏุฏ)
npm install
```

---

### ูุฑุญูู 5: ุชูุธู Firewall

```bash
# ุงุฌุงุฒู ุฏุณุชุฑุณ ุจู ูพูุฑุช 3000
sudo ufw allow 3000/tcp

# ุงุฌุงุฒู ุฏุณุชุฑุณ ุจู SSH (ูุทูุฆู ุดูุฏ ูุจูุงู ุงุถุงูู ุดุฏู)
sudo ufw allow 2223/tcp

# ูุนุงู ฺฉุฑุฏู Firewall
sudo ufw enable

# ุจุฑุฑุณ ูุถุนุช
sudo ufw status
```

---

### ูุฑุญูู 6: ุชุณุช ุงุฌุฑุง ุณุฑูุฑ

```bash
cd ~/inventory-app

# ุชุณุช ุจุง Bun
bun run server.ts

# ุง ุจุง Node.js
node server.ts
```

ุงฺฏุฑ ุณุฑูุฑ ุจุง ููููุช ุงุฌุฑุง ุดุฏุ ุจุงุฏ ูพุงูโูุง ุฒุฑ ุฑุง ุจุจูุฏ:
```
[Server] Starting on port 3000...
[Server] Server is running on http://localhost:3000
[Server] API endpoint: http://localhost:3000/api
[Server] tRPC endpoint: http://localhost:3000/api/trpc
```

#### ุชุณุช ุงุฒ ูุฑูุฑฺฏุฑ:
```
http://192.168.1.151:3000/
http://192.168.1.151:3000/health
```

---

### ูุฑุญูู 7: ุงุฌุฑุง ุฏุงุฆู ุจุง PM2

#### 1. ุงุฌุงุฏ ูุงู ecosystem
```bash
cd ~/inventory-app
nano ecosystem.config.js
```

ูุญุชูุง ูุงู:
```javascript
module.exports = {
  apps: [{
    name: 'inventory-backend',
    script: 'bun',
    args: 'run server.ts',
    cwd: '/root/inventory-app',
    instances: 1,
    autorestart: true,
    watch: false,
    max_memory_restart: '1G',
    env: {
      NODE_ENV: 'production',
      PORT: 3000
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z'
  }]
};
```

#### 2. ุงุฌุงุฏ ูพูุดู logs
```bash
mkdir -p ~/inventory-app/logs
```

#### 3. ุงุฌุฑุง ุณุฑูุฑ ุจุง PM2
```bash
cd ~/inventory-app

# ุดุฑูุน ุณุฑูุฑ
pm2 start ecosystem.config.js

# ุฐุฎุฑู ุชูุธูุงุช
pm2 save

# ุงุฌุฑุง ุฎูุฏฺฉุงุฑ ุจุนุฏ ุงุฒ ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
pm2 startup
# ุฏุณุชูุฑ ุฎุฑูุฌ ุฑุง ุงุฌุฑุง ฺฉูุฏ
```

#### 4. ุฏุณุชูุฑุงุช ูุฏุฑุช PM2
```bash
# ูุดุงูุฏู ูุถุนุช
pm2 status

# ูุดุงูุฏู ูุงฺฏโูุง
pm2 logs inventory-backend

# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
pm2 restart inventory-backend

# ุชููู
pm2 stop inventory-backend

# ุญุฐู
pm2 delete inventory-backend

# ูุงูุชูุฑูฺฏ
pm2 monit
```

---

### ูุฑุญูู 8: ุชูุธู Port Forwarding (ุงูุฌุงู ุดุฏู)

โ ุดูุง ูุจูุงู Port Forwarding ุฑุง ุชูุธู ฺฉุฑุฏูโุงุฏ:
- ูพูุฑุช ุฎุงุฑุฌ: 2223
- ูพูุฑุช ุฏุงุฎู: 2223 (ุจุฑุง SSH)

**ุจุฑุง ุฏุณุชุฑุณ ุจู API ุงุฒ ุฎุงุฑุฌ:**

ุฏู ุฑุงู ุฏุงุฑุฏ:

#### ุฑูุด 1: ุงุณุชูุงุฏู ุงุฒ ูพูุฑุช ููุฌูุฏ
ุชูุธูุงุช Port Forwarding ุฑุง ุชุบุฑ ุฏูุฏ:
- ูพูุฑุช ุฎุงุฑุฌ: 80
- ูพูุฑุช ุฏุงุฎู: 3000
- IP: 192.168.1.151

ุณูพุณ ุฏุฑ ุงูพูฺฉุดู:
- ุขุฏุฑุณ ุณุฑูุฑ: `185.120.251.246`
- ูพูุฑุช: `80` (ุง ุฎุงู ุจฺฏุฐุงุฑุฏ)

#### ุฑูุด 2: ุงุถุงูู ฺฉุฑุฏู Port Forwarding ุฌุฏุฏ (ูพุดููุงุฏ)
ุฏุฑ ุชูุธูุงุช ููุฏู:
- ูพูุฑุช ุฎุงุฑุฌ: 3000
- ูพูุฑุช ุฏุงุฎู: 3000
- IP: 192.168.1.151

ุณูพุณ ุฏุฑ ุงูพูฺฉุดู:
- ุขุฏุฑุณ ุณุฑูุฑ: `185.120.251.246`
- ูพูุฑุช: `3000`

---

### ูุฑุญูู 9: ุชูุธู ุงูพูฺฉุดู ููุจุงู

1. ุงูพูฺฉุดู ุฑุง ุจุงุฒ ฺฉูุฏ
2. ุฑู ุฏฺฉูู ุชูุธูุงุช (ฺุฑุฎ ุฏูุฏู) ุฏุฑ ุตูุญู ูุฑูุฏ ฺฉูฺฉ ฺฉูุฏ
3. ุขุฏุฑุณ ุณุฑูุฑ ุฑุง ูุงุฑุฏ ฺฉูุฏ: `185.120.251.246`
4. ูพูุฑุช ุฑุง ูุงุฑุฏ ฺฉูุฏ: `3000` (ุง ูพูุฑุช ฺฉู Port Forward ฺฉุฑุฏูโุงุฏ)
5. ุฑู "ุชุณุช ุงุชุตุงู" ฺฉูฺฉ ฺฉูุฏ
6. ุงฺฏุฑ ูููู ุจูุฏุ "ุฐุฎุฑู ุชูุธูุงุช" ุฑุง ุจุฒูุฏ

---

## ๐ง ุนุจโุงุจ (Troubleshooting)

### ูุดฺฉู: ุณุฑูุฑ ุงุฌุฑุง ูโุดูุฏ ุงูุง ุงุฒ ุฎุงุฑุฌ ุฏุฑ ุฏุณุชุฑุณ ูุณุช

#### 1. ุจุฑุฑุณ Firewall ุณุฑูุฑ
```bash
sudo ufw status
# ุงฺฏุฑ ูพูุฑุช 3000 ุฏุฑ ูุณุช ูุณุช:
sudo ufw allow 3000/tcp
```

#### 2. ุจุฑุฑุณ ุณุฑูุฑ ุฏุฑ ุญุงู ุงุฌุฑุงุณุช
```bash
pm2 status
pm2 logs inventory-backend
```

#### 3. ุจุฑุฑุณ Port Forwarding ููุฏู
- ูุงุฑุฏ ุชูุธูุงุช ููุฏู ุดูุฏ
- ุจุฎุด Port Forwarding ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ูุทูุฆู ุดูุฏ:
  - IP ุฏุงุฎู: 192.168.1.151
  - ูพูุฑุช ุฏุงุฎู: 3000
  - ูพูุฑุช ุฎุงุฑุฌ: 3000
  - ูพุฑูุชฺฉู: TCP ุง Both

#### 4. ุชุณุช ุงุฒ ุฏุงุฎู ุดุจฺฉู
```bash
# ุงุฒ ฺฉุงููพูุชุฑ ุฏุฑ ููุงู ุดุจฺฉู
curl http://192.168.1.151:3000/health
```

#### 5. ุชุณุช ุงุฒ ุฎุงุฑุฌ ุดุจฺฉู
```bash
# ุงุฒ ููุจุงู ุจุง ุฏุงุฏู ููุฑุงู (4G/5G)
curl http://185.120.251.246:3000/health
```

### ูุดฺฉู: PM2 ุจุนุฏ ุงุฒ ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุงุฌุฑุง ููโุดูุฏ

```bash
# ุชูุธู startup
pm2 startup
# ุฏุณุชูุฑ ุฎุฑูุฌ ุฑุง ฺฉูพ ู ุงุฌุฑุง ฺฉูุฏ

# ุฐุฎุฑู ุชูุธูุงุช
pm2 save
```

### ูุดฺฉู: ุฎุทุง "EADDRINUSE" (ูพูุฑุช ูุจูุงู ุงุณุชูุงุฏู ูโุดูุฏ)

```bash
# ูพุฏุง ฺฉุฑุฏู ูพุฑูุณุณ
sudo lsof -i :3000

# kill ฺฉุฑุฏู ูพุฑูุณุณ
sudo kill -9 PID_NUMBER

# ุง ุงุณุชูุงุฏู ุงุฒ fuser
sudo fuser -k 3000/tcp
```

### ูุดฺฉู: ุญุงูุธู ฺฉู

```bash
# ุจุฑุฑุณ ุญุงูุธู
free -h

# ุงุถุงูู ฺฉุฑุฏู Swap
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# ุจุฑุง ุฏุงุฆู ุดุฏู
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab
```

---

## ๐ ุงููุช (Security)

### 1. ุชุบุฑ ูพูุฑุช ูพุดโูุฑุถ SSH
```bash
sudo nano /etc/ssh/sshd_config
# ุฎุท Port ุฑุง ุจู Port 2223 ุชุบุฑ ุฏูุฏ
sudo systemctl restart sshd
```

### 2. ุบุฑูุนุงู ฺฉุฑุฏู ูุฑูุฏ Root
```bash
sudo nano /etc/ssh/sshd_config
# ุงู ุฎุท ุฑุง ุงุถุงูู ฺฉูุฏ:
# PermitRootLogin no
```

### 3. ูุตุจ Fail2Ban
```bash
sudo apt install fail2ban -y
sudo systemctl enable fail2ban
sudo systemctl start fail2ban
```

### 4. ุจูโุฑูุฒุฑุณุงู ููุธู
```bash
sudo apt update && sudo apt upgrade -y
```

---

## ๐ ูุงูุชูุฑูฺฏ

### ูุดุงูุฏู ูุงฺฏโูุง ุณุฑูุฑ
```bash
# ูุงฺฏโูุง PM2
pm2 logs inventory-backend

# ูุงฺฏโูุง ุณุณุชู
tail -f ~/inventory-app/logs/out.log
tail -f ~/inventory-app/logs/err.log
```

### ุจุฑุฑุณ ุงุณุชูุงุฏู ุงุฒ ููุงุจุน
```bash
# CPU ู Memory
pm2 monit

# Disk
df -h

# Network
sudo iftop
```

---

## ๐ ุจูโุฑูุฒุฑุณุงู ุงูพูฺฉุดู

```bash
# ูุชููู ฺฉุฑุฏู ุณุฑูุฑ
pm2 stop inventory-backend

# ุจฺฉุงูพ ฺฏุฑูุชู
cp -r ~/inventory-app ~/inventory-app-backup-$(date +%Y%m%d)

# ุขูพููุฏ ูุงูโูุง ุฌุฏุฏ (ุงุฒ ุทุฑู SCP ุง Git Pull)
# ...

# ูุตุจ dependencies ุฌุฏุฏ
cd ~/inventory-app
bun install

# ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ
pm2 restart inventory-backend

# ุจุฑุฑุณ ูุงฺฏโูุง
pm2 logs inventory-backend
```

---

## ๐ฑ ุชูุธูุงุช ุงูพูฺฉุดู

### ุจุฑุง ุดุจฺฉู ุฏุงุฎู (Local):
- ุขุฏุฑุณ ุณุฑูุฑ: `192.168.1.151`
- ูพูุฑุช: `3000`

### ุจุฑุง ุงูุชุฑูุช (External):
- ุขุฏุฑุณ ุณุฑูุฑ: `185.120.251.246`
- ูพูุฑุช: `3000` (ุง ูพูุฑุช ฺฉู Port Forward ฺฉุฑุฏูโุงุฏ)

---

## ๐ ูพุดุชุจุงู

ุงฺฏุฑ ุจุง ูุดฺฉู ููุงุฌู ุดุฏุฏ:

1. ูุงฺฏโูุง ุณุฑูุฑ ุฑุง ุจุฑุฑุณ ฺฉูุฏ: `pm2 logs`
2. ุชูุธูุงุช Firewall ุฑุง ฺฺฉ ฺฉูุฏ: `sudo ufw status`
3. Port Forwarding ููุฏู ุฑุง ุจุฑุฑุณ ฺฉูุฏ
4. ุงุฒ ุชุณุช ุงุชุตุงู ุฏุฑ ุงูพูฺฉุดู ุงุณุชูุงุฏู ฺฉูุฏ

---

## โ ฺฺฉโูุณุช ููุง

- [ ] Node.js ุง Bun ูุตุจ ุดุฏู
- [ ] PM2 ูุตุจ ุดุฏู
- [ ] ูุงูโูุง ูพุฑูฺู ููุชูู ุดุฏู
- [ ] Dependencies ูุตุจ ุดุฏู (`bun install`)
- [ ] Firewall ุชูุธู ุดุฏู (`sudo ufw allow 3000/tcp`)
- [ ] Port Forwarding ุฏุฑ ููุฏู ุชูุธู ุดุฏู
- [ ] ุณุฑูุฑ ุจุง PM2 ุงุฌุฑุง ุดุฏู (`pm2 start ecosystem.config.js`)
- [ ] PM2 startup ุชูุธู ุดุฏู (`pm2 startup` ู `pm2 save`)
- [ ] ุชุณุช ุงุชุตุงู ุงุฒ ุฏุงุฎู ุดุจฺฉู ูููู (`curl http://192.168.1.151:3000/health`)
- [ ] ุชุณุช ุงุชุตุงู ุงุฒ ุฎุงุฑุฌ ุดุจฺฉู ูููู (`curl http://185.120.251.246:3000/health`)
- [ ] ุชูุธูุงุช ุงูพูฺฉุดู ููุจุงู ุงูุฌุงู ุดุฏู

---

## ๐ ูพุฑูฺู ุดูุง ุขูุงุฏู ุงุณุช!

ุงฺฉููู ูโุชูุงูุฏ ุงุฒ ุงูพูฺฉุดู ุงุณุชูุงุฏู ฺฉูุฏ ู ฺฉุงุฑุจุฑุงู ุดูุง ูโุชูุงููุฏ ุงุฒ ูุฑ ุฌุง ุฏูุง ุจู ุณุฑูุฑ ุดูุง ูุชุตู ุดููุฏ.
