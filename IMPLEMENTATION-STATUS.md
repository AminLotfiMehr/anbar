# ูุถุนุช ูพุงุฏูโุณุงุฒ ูพุฑูฺู

## โ ุจุฎุดโูุง ุชฺฉูู ุดุฏู

### 1. ุณุณุชู ฺูุฏ ุงูุจุงุฑู
- โ ูุฏุฑุช ุงูุจุงุฑูุง (ุงุฌุงุฏุ ูุฑุงุดุ ูุณุช)
- โ ุงูุชุฎุงุจ ุงูุจุงุฑ ูุนุงู
- โ ุฌุฏุงุณุงุฒ ฺฉุงูู ุฏุงุฏูโูุง ุงูุจุงุฑูุง
- โ ููุชุฑูฺฏ ูุญุตููุงุช ู ุชุฑุงฺฉูุดโูุง ุจุฑ ุงุณุงุณ ุงูุจุงุฑ
- โ ุขูพููุฏ ูุงู ุงฺฉุณู ุฌุฏุงฺฏุงูู ุจุฑุง ูุฑ ุงูุจุงุฑ

### 2. ุณุณุชู ุขููุงู
- โ ุชุดุฎุต ูุถุนุช ุขููุงู/ุขููุงู
- โ ุฐุฎุฑูโุณุงุฒ ูููุช ุชุฑุงฺฉูุดโูุง (OfflineSyncContext)
- โ ููุงุด ุชุนุฏุงุฏ ุชุฑุงฺฉูุดโูุง ุฏุฑ ุงูุชุธุงุฑ
- โ๏ธ **ูุงุฒ ุจู ุชฺฉูู**: ุงุฏุบุงู ุจุง ุนููุงุช ุดูุงุฑุด ู ููฺฏุงูโุณุงุฒ

### 3. ุณุณุชู ุงูุจุงุฑฺฏุฑุฏุงู
- โ ุงุฌุงุฏ ุฌูุณู ุงูุจุงุฑฺฏุฑุฏุงู (Audit Session)
- โ ุชูุธู ูุฌูุฒ ุฎุฑูุฌ ฺฉุงูุง ุฏุฑ ุญู ุงูุจุงุฑฺฏุฑุฏุงู
- โ ุงุฌุงุฏ ุดูุงุฑุดโูุง ูุชุนุฏุฏ (Count Sessions)
- โ ุงุฎุชุตุงุต ุชู ุจู ูุฑ ุดูุงุฑุด
- โ ุฌููฺฏุฑ ุงุฒ ุงุฏุบุงู ุดูุงุฑุดโูุง ูุฎุชูู
- โ ูพุงุงู ุฌูุณู ุงูุจุงุฑฺฏุฑุฏุงู
- โ ูุฏุฑุช ุชูโูุง (ุงุฌุงุฏุ ูุณุช)

### 4. Backend API
- โ ูุณุฑูุง ุงุญุฑุงุฒ ููุช (ุซุจุชโูุงูุ ูุฑูุฏ)
- โ ูุณุฑูุง ูุฏุฑุช ูุญุตููุงุช
- โ ูุณุฑูุง ูุฏุฑุช ุงูุจุงุฑูุง
- โ ูุณุฑูุง ุงูุจุงุฑฺฏุฑุฏุงู ู ุดูุงุฑุด
- โ ูุณุฑูุง ูุฏุฑุช ุชูโูุง
- โ ูุณุฑูุง ุงุฏูู (ูุฏุฑุช ฺฉุงุฑุจุฑุงูุ ฺฏุฒุงุฑุดุงุช)
- โ ูพุดุชุจุงู CORS ุจุฑุง ุฏุณุชุฑุณ ุงุฒ ุดุจฺฉู

### 5. UI ููุจุงู
- โ ุตูุญู ุงุตู ุจุง ููู ฺฉุงูู
- โ ุงูุชุฎุงุจ ุงูุจุงุฑ
- โ ุดูุงุฑุด ฺฉุงูุง (ุจุง ูพุดุชุจุงู ุจุงุฑฺฉุฏ ุงุณฺฉูุฑ)
- โ ุฎุฑูุฌ ฺฉุงูุง (ุจุง ฺฉูุชุฑู ูุฌูุฒ)
- โ ุงูุจุงุฑฺฏุฑุฏุงู
- โ ูุฏุฑุช ุชูโูุง
- โ ูุณุช ูุญุตููุงุช ู ุชุฑุงฺฉูุดโูุง
- โ ููุงุด ูุถุนุช ุขููุงู/ุขููุงู

## โ๏ธ ุจุฎุดโูุง ูุงุฒููุฏ ุชฺฉูู

### 1. ุงุฏุบุงู Offline Sync ุจุง ุนููุงุช ุดูุงุฑุด
**ูููุนุช**: `app/count.tsx`, `app/outflow.tsx`

```typescript
// ูุงุฒ ุงุณุช ุฏุฑ ุตูุฑุช ุขููุงู ุจูุฏูุ ุชุฑุงฺฉูุดโูุง ุฐุฎุฑู ุดููุฏ:

const handleCountSubmit = async () => {
  try {
    if (!isOnline) {
      // ุฐุฎุฑู ูููุช
      await addPendingTransaction({
        // transaction data
      });
      Alert.alert('ุฐุฎุฑู ุดุฏ', 'ุดูุงุฑุด ุฏุฑ ุญุงูุช ุขููุงู ุฐุฎุฑู ุดุฏ ู ูพุณ ุงุฒ ุงุชุตุงู ุจู ุงูุชุฑูุช ุงุฑุณุงู ุฎูุงูุฏ ุดุฏ');
    } else {
      // ุงุฑุณุงู ูุณุชูู
      await countMutation.mutateAsync({...});
    }
  } catch (error) {
    // handle error
  }
};
```

### 2. ุตูุญู ููฺฏุงูโุณุงุฒ ุฏุณุช
**ูุงู ุฌุฏุฏ**: `app/sync.tsx`

ุจุงุฏ ุตูุญูโุง ุจุฑุง:
- ููุงุด ูุณุช ุชุฑุงฺฉูุดโูุง ุฏุฑ ุงูุชุธุงุฑ
- ุฏฺฉูู ููฺฏุงูโุณุงุฒ ุฏุณุช
- ููุงุด ูพุดุฑูุช ููฺฏุงูโุณุงุฒ
- ูุฏุฑุช ุฎุทุงูุง ููฺฏุงูโุณุงุฒ

### 3. ูพูู ูุฏุฑุช ูุจ (Admin Panel)
**ุฏุงุฑฺฉุชูุฑ**: `app/admin/`

ุตูุญุงุช ููุฑุฏ ูุงุฒ:
- `/admin` - ุฏุงุดุจูุฑุฏ ุงุตู
- `/admin/users` - ูุฏุฑุช ฺฉุงุฑุจุฑุงู
- `/admin/warehouses` - ูุฏุฑุช ุงูุจุงุฑูุง
- `/admin/reports` - ฺฏุฒุงุฑุดุงุช
- `/admin/audit-sessions` - ูุฏุฑุช ุฌูุณุงุช ุงูุจุงุฑฺฏุฑุฏุงู

**ููููู ุณุงุฎุชุงุฑ**:
```
app/admin/
  โโโ _layout.tsx          # ูุญุงูุธุช ุจุง middleware admin
  โโโ index.tsx            # ุฏุงุดุจูุฑุฏ
  โโโ users.tsx            # ูุณุช ู ุงุฌุงุฏ ฺฉุงุฑุจุฑุงู
  โโโ warehouses.tsx       # ูุฏุฑุช ุงูุจุงุฑูุง
  โโโ reports.tsx          # ฺฏุฒุงุฑุดุงุช ู ููุชุฑูุง
  โโโ sessions.tsx         # ูุฏุฑุช ุฌูุณุงุช
```

### 4. ุจูุจูุฏ ฺฏุฒุงุฑุดุงุช ู Export
**ูุงูโูุง**: `app/export.tsx`, `app/transactions.tsx`

ูุงุฒููุฏโูุง:
- ููุชุฑ ุจุฑ ุงุณุงุณ ุงูุจุงุฑ
- ููุชุฑ ุจุฑ ุงุณุงุณ ุฌูุณู ุงูุจุงุฑฺฏุฑุฏุงู
- ููุชุฑ ุจุฑ ุงุณุงุณ ุจุงุฒู ุฒูุงู
- ููุชุฑ ุจุฑ ุงุณุงุณ ููุน ุชุฑุงฺฉูุด
- ุฎุฑูุฌ ุงฺฉุณู ุจุง ุชูฺฉฺฉ ุดูุงุฑุดโูุง

### 5. ุจูุจูุฏ Upload Excel
**ูุงู**: `app/upload.tsx`

ูุงุฒ ุงุณุช:
- ุงูุฒูุฏู warehouseId ุจู ูุญุตููุงุช ุขูพููุฏ ุดุฏู
- ุญุฐู ูุญุตููุงุช ูุจู ููุงู ุงูุจุงุฑ ูุจู ุงุฒ ุขูพููุฏ
- ููุงุด ูพุดุฑูุช ุขูพููุฏ
- ูุฏุฑุช ุจูุชุฑ ุฎุทุงูุง

```typescript
// ุฏุฑ uploadExcelProcedure:
await db.products.clear(input.warehouseId); // ุญุฐู ูุญุตููุงุช ูุจู
const products = input.products.map(p => ({
  ...p,
  warehouseId: input.warehouseId,
}));
await db.products.bulkCreate(products);
```

### 6. ูุฏุฑุช ุงุนุถุง ุชู
**ูุงู**: `app/teams.tsx`, `app/team/[id].tsx`

ูุงุฒ ุงุณุช:
- ุตูุญู ุฌุฒุฆุงุช ุชู
- ุงูุฒูุฏู/ุญุฐู ุงุนุถุง
- ููุงุด ูุณุช ฺฉุงุฑุจุฑุงู ุจุฑุง ุงุถุงูู ฺฉุฑุฏู

### 7. ููุงุด ฺฏุฒุงุฑุด ุงูุจุงุฑฺฏุฑุฏุงู
**ูุงู ุฌุฏุฏ**: `app/audit/[id]/report.tsx`

ููุงุด:
- ุฎูุงุตู ุดูุงุฑุดโูุง ูุฑ ุชู
- ููุงุณู ุดูุงุฑุดโูุง
- ุงุฎุชูุงูุงุช
- ฺฏุฒุงุฑุด ููุง

## ๐ง ุชูุธูุงุช Backend

### ูุงูโูุง ูุงุฒููุฏ ุจูโุฑูุฒุฑุณุงู

#### `backend/trpc/routes/products/upload-excel.ts`
```typescript
export const uploadExcelProcedure = protectedProcedure
  .input(
    z.object({
      warehouseId: z.string(), // ุงุถุงูู ุดูุฏ
      products: z.array(
        z.object({
          code: z.string(),
          name: z.string(),
        })
      ),
    })
  )
  .mutation(async ({ input, ctx }) => {
    // ุญุฐู ูุญุตููุงุช ูุจู ุงู ุงูุจุงุฑ
    await db.products.clear(input.warehouseId);
    
    const products = input.products.map(product => ({
      id: generateId(),
      code: product.code,
      name: product.name,
      warehouseId: input.warehouseId, // ุงุถุงูู ุดูุฏ
      currentStock: 0,
      createdAt: new Date(),
      updatedAt: new Date(),
    }));
    
    await db.products.bulkCreate(products);
    return { count: products.length };
  });
```

## ๐ฑ UI Components ูุงุฒููุฏ

### 1. FilterBar Component
ุจุฑุง ุงุณุชูุงุฏู ุฏุฑ ุตูุญุงุช ฺฏุฒุงุฑุด ู ุชุฑุงฺฉูุดโูุง:
```typescript
interface FilterBarProps {
  warehouses: Warehouse[];
  onWarehouseChange: (id: string) => void;
  onDateRangeChange: (start: Date, end: Date) => void;
}
```

### 2. SyncIndicator Component
ููุงุด ูุถุนุช ููฺฏุงูโุณุงุฒ:
```typescript
interface SyncIndicatorProps {
  pendingCount: number;
  isSyncing: boolean;
  onSync: () => void;
}
```

## ๐ฏ ุงูููุชโูุง ูพุงุฏูโุณุงุฒ

### ููุฑ (Priority 1)
1. ุงุฏุบุงู offline sync ุจุง ุดูุงุฑุด
2. ุจูโุฑูุฒุฑุณุงู upload excel ุจุฑุง ูพุดุชุจุงู ุงุฒ warehouseId
3. ุตูุญู ููฺฏุงูโุณุงุฒ

### ููู (Priority 2)
4. ูพูู ุงุฏูู ูุจ
5. ุจูุจูุฏ ููุชุฑูุง ู ฺฏุฒุงุฑุดุงุช
6. ุฎุฑูุฌ ุงฺฉุณู ุจุง ุชูฺฉฺฉ

### ุงุฎุชุงุฑ (Priority 3)
7. ูุฏุฑุช ุงุนุถุง ุชู
8. ฺฏุฒุงุฑุด ููุงุณู ุดูุงุฑุดโูุง
9. ูููุฏุงุฑูุง ู ุขูุงุฑ

## ๐ ูฺฉุงุช ููู

1. **ุชุณุช Offline Mode**: ุญุชูุงู ุนููฺฉุฑุฏ ุขููุงู ุฑุง ุฏุฑ ููุจุงู ุชุณุช ฺฉูุฏ
2. **CORS**: ุชูุธูุงุช CORS ุฏุฑ ุณุฑูุฑ ุฏุฑุณุช ุงุณุช
3. **Port Forwarding**: ูพูุฑุช 3000 ู 8082 ุจุงุฏ ุฏุฑ ูุงุฑูุงู ู ุฑูุชุฑ ุจุงุฒ ุจุงุดูุฏ
4. **Database Backup**: ูุจู ุงุฒ ุชุบุฑุงุช ูููุ ุงุฒ ุฏุชุงุจุณ backup ุจฺฏุฑุฏ
5. **Type Safety**: ููู APIูุง type-safe ูุณุชูุฏ ุจุง tRPC

## ๐ ุฏุณุชูุฑุงุช ุงุฌุฑุง

### Development:
```bash
# Backend
bun run server.ts

# Frontend
bunx expo start --web --port 8082
```

### Production ุจุง PM2:
```bash
pm2 start server.ts --interpreter bun --name warehouse-backend
pm2 start "bunx expo start --web --port 8082" --name warehouse-frontend
pm2 save
```

## ๐ ูพุดุชุจุงู

ุจุฑุง ุณูุงูุงุช ู ูุดฺฉูุงุชุ ุจู ูุงูโูุง ุฑุงูููุง ูุฑุงุฌุนู ฺฉูุฏ:
- `ุฑุงูููุง-ูุตุจ.md`
- `ุฑุงูููุง-ุงุณุชูุฑุงุฑ-ุณุฑุน.md`
- `DEPLOYMENT.md`
